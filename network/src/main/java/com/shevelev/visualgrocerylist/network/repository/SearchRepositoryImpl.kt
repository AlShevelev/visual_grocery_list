package com.shevelev.visualgrocerylist.network.repository

import android.annotation.SuppressLint
import android.net.Uri
import com.shevelev.visualgrocerylist.network.api.SearchApi
import com.shevelev.visualgrocerylist.network.dto.ImageDto
import com.shevelev.visualgrocerylist.network.dto.ImageSizeDto
import com.shevelev.visualgrocerylist.network.dto.SearchResultDto
import java.io.StringReader
import javax.xml.parsers.DocumentBuilderFactory
import javax.xml.xpath.XPath
import javax.xml.xpath.XPathConstants
import javax.xml.xpath.XPathFactory
import org.w3c.dom.Document
import org.w3c.dom.NodeList
import org.xml.sax.InputSource

class SearchRepositoryImpl(
    private val api: SearchApi,
) : SearchRepository {
    override suspend fun search(request: String): Result<SearchResultDto> {
        return runCatching {
            val resultXml = api.search(request).toString(Charsets.UTF_8)

            val xmlDoc = getXmlDoc(resultXml)

            val xPath = XPathFactory.newInstance().newXPath()

            val result = SearchResultDto(
                request = xmlDoc.getRequestValue(xPath),
                images = xmlDoc.getImageDocs(xPath)
            )

            result
        }
    }

    private fun getXmlDoc(rawXml: String): Document {
        val dbFactory = DocumentBuilderFactory.newInstance()
        val dBuilder = dbFactory.newDocumentBuilder()

        return StringReader(rawXml).use { reader ->
            val xmlInput = InputSource(reader)
            dBuilder.parse(xmlInput)
        }
    }

    private fun Document.getRequestValue(xPath: XPath): String {
        val requestXpath = "/yandexsearch/request/query"
        return xPath.evaluate(requestXpath, this)
    }

    @SuppressLint("UseKtx")
    private fun Document.getImageDocs(xPath: XPath): List<ImageDto> {
        val result = mutableListOf<ImageDto>()

        val requestXpath = "/yandexsearch/response/results/grouping/group/doc/image-properties"
        val docs = xPath.evaluate(requestXpath, this, XPathConstants.NODESET) as NodeList

        for (i in 0 until docs.length) {
            val doc = docs.item(i)

            var thumbnailLink: Uri? = null
            var thumbnailWidth: Int? = null
            var thumbnailHeight: Int? = null

            var originalWidth: Int? = null
            var originalHeight: Int? = null
            var imageLink: Uri?  = null

            var fileSize: Long? = null
            var mimeType: String? = null

            for (j in 0 until doc.childNodes.length) {
                val child = doc.childNodes.item(j)

                when (child.nodeName) {
                    "thumbnail-link" -> thumbnailLink = Uri.parse(child.firstChild.nodeValue)
                    "thumbnail-width" -> thumbnailWidth = child.firstChild.nodeValue.toInt()
                    "thumbnail-height" -> thumbnailHeight = child.firstChild.nodeValue.toInt()
                    "original-width" -> originalWidth = child.firstChild.nodeValue.toInt()
                    "original-height" -> originalHeight = child.firstChild.nodeValue.toInt()
                    "image-link" -> imageLink = Uri.parse(child.firstChild.nodeValue)
                    "file-size" -> fileSize = child.firstChild.nodeValue.toLong()
                    "mime-type" -> mimeType = child.firstChild.nodeValue
                }
            }

            result.add(
                ImageDto(
                    thumbnailLink = requireNotNull(thumbnailLink),
                    imageLink = requireNotNull(imageLink),
                    fileSize = requireNotNull(fileSize),
                    mimeType = requireNotNull(mimeType),

                    thumbnailSize = ImageSizeDto(
                        width = requireNotNull(thumbnailWidth),
                        height = requireNotNull(thumbnailHeight),
                    ),
                    originalSize = ImageSizeDto(
                        width = requireNotNull(originalWidth),
                        height = requireNotNull(originalHeight),
                    ),
                )
            )
        }

        return result
    }

    private val rawXml = "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?> <yandexsearch version=\"1.0\"> <request> <query>овощи</query> <page>0</page> <sortby order=\"descending\" priority=\"no\">rlv</sortby> <maxpassages>1</maxpassages> <groupings> <groupby attr=\"ii\" curcateg=\"-1\" docs-in-group=\"1\" groups-on-page=\"20\" mode=\"deep\"/> </groupings> </request> <response date=\"20250706T074710\"> <reqid>1751788029816274-13403668034998898432-balancer-l7leveler-kubr-yp-vla-74-BAL</reqid> <found priority=\"phrase\">12426</found> <found priority=\"strict\">12426</found> <found priority=\"all\">12426</found> <found-human>12 thsd. answers found</found-human> <is-local>no</is-local> <results> <grouping attr=\"ii\" curcateg=\"-1\" docs-in-group=\"1\" groups-on-page=\"20\" mode=\"deep\"> <page first=\"1\" last=\"20\">0</page> <group> <categ attr=\"ii\" id=\"8257055565414132093\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z977C18695BD3BE5B\"> <relevance priority=\"all\"/> <url>http://ciarf.ru/upload/resize_cache/iblock/b10/1100_792_1/b10a7d4cc8cd5c41735d3b60ad5c81bb.jpg</url> <domain>ciarf.ru</domain> <modtime>20180911T083323</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>20d3d0fa977da45e051da7a380bd67e588b0aea6-8491909-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=20d3d0fa977da45e051da7a380bd67e588b0aea6-8491909-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>792</original-width> <original-height>792</original-height> <html-link>https://ciarf.ru/news/minselkhoz-prorabatyvaet-vozmozhnost-pryamogo-sbyta-ovoshchey-dlya-malykh-i-srednikh-khozyaystv/</html-link> <image-link>https://ciarf.ru/upload/resize_cache/iblock/b10/1100_792_1/b10a7d4cc8cd5c41735d3b60ad5c81bb.jpg</image-link> <file-size>348957</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"6153532752460202262\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z1056E9B1BA20567F\"> <relevance priority=\"all\"/> <url>http://thundeal.ru/wp-content/uploads/2022/11/thundeal-td90-pro-ful-hd-projector-mini-led-android-wifi-td90pro-native-1080p-projector-video-home-2-768x768.jpg</url> <domain>thundeal.ru</domain> <modtime>20170210T191943</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>9a4ceb6b4594326db6f6795312930977db9d4329-9065868-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=9a4ceb6b4594326db6f6795312930977db9d4329-9065868-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>768</original-width> <original-height>768</original-height> <html-link>https://thundeal.ru/?attachment_id=1207</html-link> <image-link>https://thundeal.ru/wp-content/uploads/2022/11/thundeal-td90-pro-ful-hd-projector-mini-led-android-wifi-td90pro-native-1080p-projector-video-home-2-768x768.jpg</image-link> <file-size>170082</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"2901405081507549770\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z6D0A933EE6D886EC\"> <relevance priority=\"all\"/> <url>https://rare-gallery.com/uploads/posts/854128-Cucumbers-Tomatoes-Bell-pepper-Onion-Wood-planks.jpg</url> <domain>rare-gallery.com</domain> <modtime>20180529T183732</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>48cf3115db2c5ae61d3376622f9464fab9110e6e-5351814-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=48cf3115db2c5ae61d3376622f9464fab9110e6e-5351814-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>800</original-width> <original-height>800</original-height> <html-link>https://profesjonalnyrolnik.pl/nawozy/1877-nawoz-do-warzyw-granulat-3kg-biopon</html-link> <image-link>https://profesjonalnyrolnik.pl/3783-thickbox_default/nawoz-do-warzyw-granulat-3kg-biopon.jpg</image-link> <file-size>115310</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"835120790432622333\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z8CAA156FDBC98104\"> <relevance priority=\"all\"/> <url>https://s2.best-wallpaper.net/wallpaper/2560x1920/2010/Vegetable-carrot-tomato-cucumber-cabbage-pepper_2560x1920.jpg</url> <domain>s2.best-wallpaper.net</domain> <modtime>20171121T190409</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>12ed24df8257da2abc1da9443ea8025c02df3498-5430057-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=12ed24df8257da2abc1da9443ea8025c02df3498-5430057-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>420</original-width> <original-height>420</original-height> <html-link>https://www.growo.lv/application/</html-link> <image-link>https://site-545845.mozfiles.com/files/545845/galleries/17000222/thumb/orig.jfif?3511185</image-link> <file-size>58245</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"3792591683582204703\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z5195726E293C1678\"> <relevance priority=\"all\"/> <url>https://jooinn.com/images/vegetables-and-fruits-1.jpg</url> <domain>jooinn.com</domain> <modtime>20180929T162715</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>d81ef6159ff1ed6ce0f2c90ab773c3706cd1834d-4010157-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=d81ef6159ff1ed6ce0f2c90ab773c3706cd1834d-4010157-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>800</original-width> <original-height>800</original-height> <html-link>https://agro-kazakhstan.com/ru/trade/i-35585/imgs/</html-link> <image-link>https://agro-kazakhstan.com/imgs/board/85/35585-6.jpg</image-link> <file-size>149322</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"8133575939267266401\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z7735F29B57ED96A8\"> <relevance priority=\"all\"/> <url>https://econet.kz/media/559/kindeditor/image/201310/20131023212653.jpg</url> <domain>econet.kz</domain> <modtime>20180831T025705</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>1af645865ff2bdd0c429278413da8ae6d80c7dbb-4055134-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=1af645865ff2bdd0c429278413da8ae6d80c7dbb-4055134-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>512</original-width> <original-height>512</original-height> <html-link>https://lifedailyjoy.com/page/6/</html-link> <image-link>https://lifedailyjoy.com/wp-content/uploads/2016/11/cropped-CM122_L.jpg</image-link> <file-size>35211</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"6794932218156782172\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z74F5136AC423C0C6\"> <relevance priority=\"all\"/> <url>https://visuels.l214.com/divers/plats/photos-achetees/HD/panier-legumes-frais.jpg</url> <domain>visuels.l214.com</domain> <modtime>20171113T180756</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>ccdaf7f6b69cc703e28502d757076e6a2ae3873b-5236697-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=ccdaf7f6b69cc703e28502d757076e6a2ae3873b-5236697-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>512</original-width> <original-height>512</original-height> <html-link>https://play.google.com/store/apps/details?id=com.tinas.app&amp;hl=be&amp;gl=US</html-link> <image-link>https://play-lh.googleusercontent.com/RiFY8ZeHrn83ng-LWjV7Lkq1C6EV1FRMfJd4Wc_iqKBav2jYP2FokMeVBZuJs_ejbA</image-link> <file-size>353760</file-size> <mime-type>png</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"7566478783432649138\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z3C96C8D03E6CA4C8\"> <relevance priority=\"all\"/> <url>https://avatars.mds.yandex.net/get-shedevrum/15170052/img_aa7fe49abe3111efa32c6a69a05b81c1/orig</url> <domain>avatars.mds.yandex.net</domain> <modtime>20250219T191922</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>d6061a93c5f789d5fa12ccbb36825075247a3dd4-10348710-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=d6061a93c5f789d5fa12ccbb36825075247a3dd4-10348710-images-thumbs</thumbnail-link> <thumbnail-width>348</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>720</original-width> <original-height>662</original-height> <html-link>http://proxy.nowhereincoming.net/index.php?q=aHR0cHM6Ly9kemVuLnJ1L2EvWjJSYzM3LU9Cendha2dCYg%3D%3D</html-link> <image-link>https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_67645cdfbf8e073c1a92005b_67645ceaf40a771d501081b2/scale_720</image-link> <file-size>1218694</file-size> <mime-type>png</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"797314851327588022\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZC623BFDD1A16B788\"> <relevance priority=\"all\"/> <url>https://tdstroitel.ru/images/abt__ut2/banners/all/160/veg-min.png</url> <domain>tdstroitel.ru</domain> <modtime>20231107T084045</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>ad578d84232dbd51e3b1bb434481639484a71d88-4885151-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=ad578d84232dbd51e3b1bb434481639484a71d88-4885151-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>500</original-width> <original-height>500</original-height> <html-link>https://khanehbazr.ir/</html-link> <image-link>https://khanehbazr.ir/wp-content/uploads/2024/01/Blackberries-milk-splash-floating-10-1.png</image-link> <file-size>78775</file-size> <mime-type>png</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"4070953792015813720\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZA24D3DC1E87A9B93\"> <relevance priority=\"all\"/> <url>https://rincondelmusculo.com/wp-content/uploads/2015/07/8-alimentos-para-mejorar-la-salud-sanguinea.jpg</url> <domain>rincondelmusculo.com</domain> <modtime>20181010T201659</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>b85987a96f922022f20e732c6f71102e5466b314-5255188-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=b85987a96f922022f20e732c6f71102e5466b314-5255188-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>800</original-width> <original-height>800</original-height> <html-link>https://gds.it/articoli/societa/2014/12/07/vegetariani-solo-uno-su-cinque-rimane-fedele-alla-scelta-0ac82acc-0927-465e-b84f-4757e32a99f3/</html-link> <image-link>https://assets.gds.it/2014/11/Verdura-Ortaggi-800x800.jpg</image-link> <file-size>247630</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"4372856625380533750\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZA0AD5F24DADC9E6C\"> <relevance priority=\"all\"/> <url>https://iasbh.tmgrup.com.tr/aec5f3/0/0/0/0/0/0?u=http://i.sabah.com.tr/sb/fotohaber/saglik/kis-hastaliklarina-karsi-koruyan-gidalar/2.jpg</url> <domain>iasbh.tmgrup.com.tr</domain> <modtime>20180618T155556</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>e51ff2690df99712689f8dbf87fcfba28938c30d-5877417-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=e51ff2690df99712689f8dbf87fcfba28938c30d-5877417-images-thumbs</thumbnail-link> <thumbnail-width>313</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>735</original-width> <original-height>752</original-height> <html-link>https://stopnsk.ru/kadri-podskazki/pravilnoe-pitanie-znaki-na-prozrachnom-fone.php</html-link> <image-link>https://i.pinimg.com/736x/c2/00/9f/c2009f2a2daa22e9fb3a290056a71822.jpg</image-link> <file-size>72471</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"865651454311833422\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z80A0E486C20212FB\"> <relevance priority=\"all\"/> <url>https://www.tapetus.pl/obrazki/n/67706_koszyk-warzywa.jpg</url> <domain>www.tapetus.pl</domain> <modtime>20180210T015048</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>cdbc6b782cf84cb9e8f527363d0cbd11ba1d81f7-4954930-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=cdbc6b782cf84cb9e8f527363d0cbd11ba1d81f7-4954930-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>800</original-width> <original-height>800</original-height> <html-link>https://food-list.ru/product/category/ovoshi?s%5Bbegin%5D=%D0%BA</html-link> <image-link>https://food-list.ru/files/storage/ov/os/ovoshi_1459870428.png</image-link> <file-size>519769</file-size> <mime-type>png</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"6305432097624925521\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZDAE52857E7E34605\"> <relevance priority=\"all\"/> <url>https://whitakerwellness.com/wp-content/uploads/2016/03/shutterstock_67604020.jpg</url> <domain>whitakerwellness.com</domain> <modtime>20180909T140219</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>2207011df37938550aab4711ff2b16a07bb0febe-4257141-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=2207011df37938550aab4711ff2b16a07bb0febe-4257141-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>612</original-width> <original-height>612</original-height> <html-link>https://m.my.mail.ru/community/helfine.ru/photo/_groupsphoto/9.html?back=%2Fcommunity%2Fhelfine.ru%2F</html-link> <image-link>https://content-17.foto.my.mail.ru/community/helfine.ru/_groupsphoto/h-9.jpg</image-link> <file-size>48943</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"197990650193452860\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z93D9602DE4F71D67\"> <relevance priority=\"all\"/> <url>https://kartinki.pics/uploads/posts/2022-03/1646572298_52-kartinkin-net-p-kartinki-ovoshchei-i-fruktov-po-otdelnosti-67.jpg</url> <domain>kartinki.pics</domain> <modtime>20180131T014211</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>12d003e314138e5fcd83be3335cf3dcda91fe973-5889153-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=12d003e314138e5fcd83be3335cf3dcda91fe973-5889153-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>512</original-width> <original-height>512</original-height> <html-link>https://vk.com/photo-111041506_405672958</html-link> <image-link>https://sun9-18.userapi.com/impf/c630218/v630218805/1b42b/6FF_9EDanNI.jpg?size=512x512&amp;quality=96&amp;sign=be61e41ed5d2d43be6fb529b33401767&amp;type=album</image-link> <file-size>37723</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"723151380197733932\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZDBB6AD35742D35B9\"> <relevance priority=\"all\"/> <url>https://cdn.galleries.smcloud.net/t/galleries/gf-9vL3-DHTt-N3N6_naturalne-witaminy-lepsze-niz-syntetyczne-1920x1080-nocrop.jpg</url> <domain>cdn.galleries.smcloud.net</domain> <modtime>20180124T154504</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>8d475b1a55525708a7dbaf9fbda72846af1ae8a2-12411982-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=8d475b1a55525708a7dbaf9fbda72846af1ae8a2-12411982-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>512</original-width> <original-height>512</original-height> <html-link>https://appadvice.com/game/app/vegetables-quiz-images-trivia/1350224731.amp</html-link> <image-link>https://is3-ssl.mzstatic.com/image/thumb/Purple118/v4/28/37/26/283726b4-b96b-c890-6bdf-f8817f5f6d69/source/512x512bb.jpg</image-link> <file-size>53231</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"8615851882310099543\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z3B9CFC13312D0F01\"> <relevance priority=\"all\"/> <url>https://yavuzdizdar.com/wp-content/uploads/2014/12/cropped-healthy-food.jpg</url> <domain>yavuzdizdar.com</domain> <modtime>20180825T224541</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>2a00000179f2afea763c2ade743137e1d0ef-4825573-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=2a00000179f2afea763c2ade743137e1d0ef-4825573-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>690</original-width> <original-height>690</original-height> <html-link>https://istraria.ru/news/2104-v-podmoskove-zaplanirovano-provedenie-245-jarmarok.html</html-link> <image-link>https://istraria.ru/upload/000/u19/c/9/v-podmoskove-zaplanirovano-provedenie-245-jarmarok-photo-big.jpg</image-link> <file-size>106052</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"6179058517927798203\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z94D9178AAD954652\"> <relevance priority=\"all\"/> <url>https://on-desktop.com/wps/2020Food___Berries_and_fruits_and_nuts_Fresh_carrots__tomatoes__peppers_and_bananas_on_a_red_background_142215_.jpg</url> <domain>on-desktop.com</domain> <modtime>20190607T120410</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>72b5ca19ef34fb2999382de1b75d38289c313221-10896002-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=72b5ca19ef34fb2999382de1b75d38289c313221-10896002-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>800</original-width> <original-height>800</original-height> <html-link>https://www.digikala.com/product/dkp-6146933/%D9%85%DA%AF%D9%86%D8%AA-%D8%B7%D8%B1%D8%AD-%D9%85%DB%8C%D9%88%D9%87-%D9%85%D9%88%D8%B2-%D9%88-%D9%87%D9%88%DB%8C%D8%AC-%D9%88-%D9%81%D9%84%D9%81%D9%84-%D8%AF%D9%84%D9%85%D9%87-%D9%88-%D9%87%D9%88%DB%8C%D8%AC-%D9%88-%DA%AF%D9%88%D8%AC%D9%87-%D9%85%D8%AF%D9%84-t1781</html-link> <image-link>https://dkstatics-public.digikala.com/digikala-products/195abe0eb7af9849c098b303fb90d0659a24ae28_1629137300.jpg?x-oss-process=image/resize,m_lfit,h_800,w_800/quality,q_90</image-link> <file-size>141989</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"2570632790440056873\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z8AA3D5844F6466AF\"> <relevance priority=\"all\"/> <url>https://sun9-32.userapi.com/impf/d4nbh-TpAKb8aK4vp_Fng65W8ERJRuGVlUA2CA/X7WNmNd7c18.jpg?size=1280x1280&amp;quality=96&amp;blur=50,20&amp;sign=86b2b3298ece2dab894b5c25bb228319&amp;c_uniq_tag=zuMbPV-5_eRAoKmc4eqvCzkP9QxAjhoLv7pjjnlbyTo&amp;type=album</url> <domain>sun9-32.userapi.com</domain> <modtime>20220927T223407</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>7086d2f4914ca0007136daf665e22aa319de8818-4613464-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=7086d2f4914ca0007136daf665e22aa319de8818-4613464-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>474</original-width> <original-height>474</original-height> <html-link>https://www.aiophotoz.com/photos/%D0%A6%D0%B2%D0%B5%D1%82%D0%BD%D0%B0%D1%82%D0%B0-%D0%B4%D0%B8%D0%B5%D1%82%D0%B0-%D0%BA%D0%B0%D0%BA-%D0%B4%D0%B0-%D1%81%D0%B5-%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BC-%D0%B7%D0%B4%D1%80%D0%B0%D0%B2%D0%BE%D1%81%D0%BB%D0%BE%D0%B2%D0%BD%D0%BE-%D1%81-%D1%86%D0%B2%D0%B5%D1%82%D0%BE%D0%B2%D0%B5%D1%82%D0%B5-%D0%BD%D0%B0-%D0%B4%D1%8A%D0%B3%D0%B0%D1%82%D0%B0.html</html-link> <image-link>https://tse4.mm.bing.net/th?id=OIP.Dlji7rtPxLKKGiFNxfBFwAHaHa&amp;pid=15.1</image-link> <file-size>60093</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"2403152463450725523\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"Z06396E6F1532D88A\"> <relevance priority=\"all\"/> <url>https://www.wonderwall.co.uk/media/catalog/product/cache/8/image/c58fdbc904f4fc2cdab120ab6e773a47/4/9/49405968/Basket-of-vegetables-WW-40423100.jpeg</url> <domain>www.wonderwall.co.uk</domain> <modtime>20181228T062253</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>aaffe955d074b812fc2bd50e81259de4aeb69569-5545903-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=aaffe955d074b812fc2bd50e81259de4aeb69569-5545903-images-thumbs</thumbnail-link> <thumbnail-width>320</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>500</original-width> <original-height>500</original-height> <html-link>https://www.lingo-play.com/de/griechisch-unterricht-online/lernkarten/mix-1/?</html-link> <image-link>https://lingo-data.b-cdn.net/Lingo/files/images/00331.jpg</image-link> <file-size>28183</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <group> <categ attr=\"ii\" id=\"5864906055723664018\"/> <doccount>1</doccount> <relevance priority=\"all\"/> <doc id=\"ZD47A809D5E946C32\"> <relevance priority=\"all\"/> <url>https://img.goodfon.ru/original/2048x2048/d/30/iashchik-ovoshchi-pomidory-ogurtsy-kapusta-perets-morkov-che.jpg</url> <domain>img.goodfon.ru</domain> <modtime>20200610T015751</modtime> <size>0</size> <charset>utf-8</charset> <image-properties> <id>90e4aa55d0cb10415c73305bab4d520d-5870396-images-thumbs</id> <shard>0</shard> <thumbnail-link>http://avatars.mds.yandex.net/i?id=90e4aa55d0cb10415c73305bab4d520d-5870396-images-thumbs</thumbnail-link> <thumbnail-width>326</thumbnail-width> <thumbnail-height>320</thumbnail-height> <original-width>640</original-width> <original-height>628</original-height> <html-link>https://www.nnetwork.org.uk/tag/bude-road/</html-link> <image-link>https://www.nnetwork.org.uk/wp-content/uploads/2019/06/bude-road.jpg</image-link> <file-size>57660</file-size> <mime-type>jpg</mime-type> </image-properties> <mime-type>text/html</mime-type> <properties/> </doc> </group> <found priority=\"phrase\">12322</found> <found priority=\"strict\">12322</found> <found priority=\"all\">12322</found> <found-docs priority=\"phrase\">12322</found-docs> <found-docs priority=\"strict\">12322</found-docs> <found-docs priority=\"all\">12322</found-docs> <found-docs-human>found 12 thsd. answers</found-docs-human> </grouping> </results> </response> </yandexsearch>"
}